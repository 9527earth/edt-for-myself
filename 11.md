# VLESS Cloudflare Worker

ä¸€ä¸ªåŸºäº Cloudflare Worker çš„ VLESS ä»£ç†æœåŠ¡ï¼Œæ”¯æŒ WebSocket ä¼ è¾“ã€SOCKS5 ä»£ç†å›é€€ã€DNS over HTTPS ç­‰åŠŸèƒ½ã€‚

## âœ¨ ç‰¹æ€§

- ğŸš€ åŸºäº Cloudflare Workerï¼Œæ— éœ€æœåŠ¡å™¨
- ğŸ” æ”¯æŒ VLESS åè®®ä¸ UUID éªŒè¯
- ğŸŒ WebSocket ä¼ è¾“ï¼Œæ”¯æŒ TLS åŠ å¯†
- ğŸ”„ å¤šé‡è¿æ¥å›é€€ç­–ç•¥ï¼ˆç›´è¿ â†’ SOCKS5 â†’ ProxyIPï¼‰
- ğŸ“¡ DNS over HTTPS (DoH) æ”¯æŒ
- ğŸ¯ çµæ´»çš„èŠ‚ç‚¹é…ç½®ä¸è®¢é˜…ç”Ÿæˆ
- ğŸ›¡ï¸ æ”¯æŒå…¨å±€ SOCKS5 ä»£ç†æ¨¡å¼

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. éƒ¨ç½²åˆ° Cloudflare Workers

1. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/)
2. è¿›å…¥ `Workers & Pages` â†’ `Create application` â†’ `Create Worker`
3. å°†æœ¬é¡¹ç›®ä»£ç ç²˜è´´åˆ°ç¼–è¾‘å™¨ä¸­
4. ç‚¹å‡» `Save and Deploy`

### 2. é…ç½®ç¯å¢ƒå˜é‡

åœ¨ Worker è®¾ç½®é¡µé¢çš„ `Variables` ä¸­æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

| å˜é‡å | å¿…éœ€ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `USERID` | âŒ | `ikun` | è®¢é˜…è·¯å¾„çš„ç”¨æˆ· ID |
| `UUID` | âŒ | `4ba0eec8-25e1-4ab3-b188-fd8a70b53984` | VLESS ç”¨æˆ· UUID |
| `NODE_NAME` | âŒ | `IKUN-vless` | èŠ‚ç‚¹åç§° |
| `URL` | âŒ | `example.com` | é WebSocket è¯·æ±‚çš„å›é€€åœ°å€ |
| `BESTIPS` | âŒ | è§ä¸‹æ–¹ | ä¼˜é€‰ IP åˆ—è¡¨ |
| `PROXYIP` | âŒ | - | ä»£ç† IPï¼Œæ ¼å¼ï¼š`host:port` |
| `SOCKS5` | âŒ | - | SOCKS5 ä»£ç†é…ç½® |
| `GSOCKS5` | âŒ | `false` | å…¨å±€ SOCKS5 å¼€å…³ |

#### é»˜è®¤ BESTIPS åˆ—è¡¨
```
ip.sb
www.visa.com
developers.cloudflare.com
ikun.glimmer.cf.090227.xyz
```

## ğŸ“‹ ä½¿ç”¨æ–¹æ³•

### è·å–è®¢é˜…é“¾æ¥

è®¿é—®ä»¥ä¸‹ URL è·å–èŠ‚ç‚¹è®¢é˜…ï¼š

```
https://your-worker-domain.workers.dev/YOUR_USERID
```

è¿”å›æ ¼å¼ä¸ºçº¯æ–‡æœ¬ï¼Œæ¯è¡Œä¸€ä¸ª `vless://` é“¾æ¥ã€‚

### SOCKS5 é…ç½®æ ¼å¼

æ”¯æŒå¤šç§ SOCKS5 é…ç½®æ ¼å¼ï¼š

```bash
# åŸºæœ¬æ ¼å¼
user:pass@host:port

# å¸¦åè®®å‰ç¼€
socks5://user:pass@host:port
socks://user:pass@host:port

# Base64 ç”¨æˆ·å
socks://dXNlcjpwYXNzd29yZA==@host:port

# å…¨å±€ SOCKS5 æ ¼å¼
gsocks5://user:pass@host:port
gs5://user:pass@host:port
```

### URL å‚æ•°

æ”¯æŒé€šè¿‡ URL å‚æ•°åŠ¨æ€é…ç½®ï¼š

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `proxyip` | ä¸´æ—¶ä»£ç† IP | `?proxyip=1.1.1.1:443` |
| `s5` / `socks5` | SOCKS5 ä»£ç† | `?s5=user:pass@host:1080` |
| `gs5` / `gsocks5` | å…¨å±€ SOCKS5 | `?gs5=user:pass@host:1080` |

### è¿æ¥ç­–ç•¥

#### æ™®é€šæ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
1. **ç›´è¿** - ç›´æ¥è¿æ¥ç›®æ ‡åœ°å€
2. **SOCKS5 å›é€€** - ç›´è¿å¤±è´¥æ—¶ä½¿ç”¨ SOCKS5
3. **ProxyIP å›é€€** - SOCKS5 å¤±è´¥æ—¶ä½¿ç”¨ä»£ç† IP

#### å…¨å±€ SOCKS5 æ¨¡å¼
1. **SOCKS5 ä¼˜å…ˆ** - é¦–å…ˆå°è¯• SOCKS5 è¿æ¥
2. **è‡ªåŠ¨é™çº§** - å¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°æ™®é€šæ¨¡å¼

## âš™ï¸ é«˜çº§é…ç½®

### å¯ç”¨å…¨å±€ SOCKS5

å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å¯ç”¨å…¨å±€ SOCKS5ï¼š

1. **ç¯å¢ƒå˜é‡**ï¼š`GSOCKS5=true`
2. **URL å‚æ•°**ï¼š`?gs5=true` æˆ– `?gsocks5=true`
3. **è·¯å¾„å‚æ•°**ï¼š`/gs5=socks5://user:pass@host:1080`

### å¤šç§å‚æ•°ä¼ é€’æ–¹å¼

```bash
# Query å‚æ•°
https://worker.dev/userid?s5=user:pass@host:1080

# Path å‚æ•°
https://worker.dev/userid/s5=user:pass@host:1080

# å…¨å±€æ¨¡å¼
https://worker.dev/userid?gs5=user:pass@host:1080
```

### DNS over HTTPS

è„šæœ¬è‡ªåŠ¨å¤„ç† DNS æŸ¥è¯¢ï¼ˆUDP ç«¯å£ 53ï¼‰ï¼Œé€šè¿‡ Cloudflare DoH æœåŠ¡è§£æï¼š
- DoH æœåŠ¡å™¨ï¼š`https://1.1.1.1/dns-query`
- è‡ªåŠ¨è½¬æ¢ UDP DNS ä¸º HTTPS è¯·æ±‚

## ğŸ› ï¸ å®¢æˆ·ç«¯é…ç½®

### V2Ray/V2RayN é…ç½®ç¤ºä¾‹

```json
{
  "protocol": "vless",
  "settings": {
    "vnext": [{
      "address": "your-bestip-or-domain",
      "port": 443,
      "users": [{
        "id": "your-uuid",
        "encryption": "none"
      }]
    }]
  },
  "streamSettings": {
    "network": "ws",
    "security": "tls",
    "wsSettings": {
      "path": "/?proxyip=1.1.1.1:443&s5=user:pass@host:1080",
      "headers": {
        "Host": "your-worker-domain.workers.dev"
      }
    },
    "tlsSettings": {
      "serverName": "your-worker-domain.workers.dev",
      "allowInsecure": true
    }
  }
}
```

### Clash Meta é…ç½®ç¤ºä¾‹

```yaml
proxies:
  - name: "VLESS-Worker"
    type: vless
    server: your-bestip-or-domain
    port: 443
    uuid: your-uuid
    tls: true
    servername: your-worker-domain.workers.dev
    skip-cert-verify: true
    network: ws
    ws-opts:
      path: /?proxyip=1.1.1.1:443
      headers:
        Host: your-worker-domain.workers.dev
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **è¿æ¥å¤±è´¥**
   - æ£€æŸ¥ UUID æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤ TLS è®¾ç½®å’Œ SNI
   - éªŒè¯ WebSocket è·¯å¾„

2. **SOCKS5 ä¸å·¥ä½œ**
   - æ£€æŸ¥ SOCKS5 æœåŠ¡å™¨å¯è¾¾æ€§
   - éªŒè¯ç”¨æˆ·åå¯†ç æ ¼å¼
   - ç¡®è®¤ç«¯å£è®¾ç½®

3. **è®¢é˜…é“¾æ¥æ— æ³•è®¿é—®**
   - æ£€æŸ¥ USERID ç¯å¢ƒå˜é‡
   - ç¡®è®¤ Worker åŸŸåæ­£ç¡®

### è°ƒè¯•æŠ€å·§

- ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹ WebSocket è¿æ¥
- æ£€æŸ¥ Cloudflare Worker æ—¥å¿—
- æµ‹è¯•ä¸åŒçš„ BESTIPS åœ°å€

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäºå¼€æºåè®®å‘å¸ƒï¼Œè¯·éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ã€‚

## âš ï¸ å…è´£å£°æ˜

- æœ¬å·¥å…·ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨
- è¯·éµå®ˆå½“åœ°æ³•å¾‹æ³•è§„
- ä½œè€…ä¸æ‰¿æ‹…ä»»ä½•ä½¿ç”¨é£é™©

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**æ³¨æ„**ï¼šä½¿ç”¨å‰è¯·ç¡®ä¿äº†è§£å¹¶éµå®ˆ Cloudflare Workers çš„ä½¿ç”¨æ¡æ¬¾å’Œé™åˆ¶ã€‚
